<!DOCTYPE html>
<html>

<head>
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-941797-10"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments)};
      gtag('js', new Date());

      gtag('config', 'UA-941797-10');
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Learning Locker Documentation</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Documentation for Learning Locker, the open source learning record store.">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/tomorrow-night.css">
    <link rel="stylesheet" href="../css/docs.css">

    <script type="text/javascript">
        function prettyCode() {
            var tables = document.getElementsByTagName('table');
            for (index = 0; index < tables.length; ++index) {
                tables[index].className = "table table-default table-bordered";
            }
        }
    </script>
</head>


<body onload="prettyCode();">

  <div class="docs-masthead">
    <div class="container">
      <a href="../welcome"><img src="../images/logo-small.png" class="logo"></a>
        <nav class="docs-nav pull-right">
            <a class="docs-nav-item" href="http://learninglocker.net">Main Website</a>
            <a class="docs-nav-item" href="https://github.com/LearningLocker/learninglocker">Github</a>
            <a class="docs-nav-item" href="https://github.com/LearningLocker/docs">Edit</a>
        </nav>
    </div>
</div>


  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-3 docs-sidebar">
        <div class="sidebar-title">
          <a href="../welcome">Overview</a>
        </div>
        <ul class="nav">
          <li><a href="../overview-architecture">Architecture</a></li>
          <li><a href="../overview-xapi">xAPI</a></li>
        </ul>
        <div class="sidebar-title">
          <a href="#">Guides</a>
        </div>
        <ul class="nav">
          <li><a href="../guides-installing">Installation</a></li>
          <li><a href="../guides-custom-installation">Custom Installations</a></li>
          <li><a href="../guides-configuring">Configuration</a></li>
          <li><a href="../guides-cli">CLI Operations</a></li>
          <li><a href="../guides-migrating">Migrating from v1</a></li>
          <li><a href="../guides-indexing">Indexing</a></li>
          <li><a href="../guides-monitoring">Monitoring</a></li>
          <li><a href="../guides-structuring">Structuring your LRS</a></li>
          <li><a href="../guides-inserting">Inserting statements</a></li>
          <li><a href="../guides-retrieving">Retrieving statements</a></li>
          <li><a href="../guides-integrating">Integrations</a></li>
        </ul>

        <div class="sidebar-title">
          <a href="#">HTTP Interfaces (APIs)</a>
        </div>
        <ul class="nav">
          <li><a href="../http-rest">REST API</a></li>
          <li><a href="../http-connection">Connection API</a></li>
          <li><a href="../http-aggregation">Aggregation API</a></li>
          <li><a href="../http-aggregate"><strong>[Enterprise]</strong> Aggregate API</a></li>
          <li><a href="../http-statement-deletion">Statement Deletion API</a></li>
        </ul>

        <div class="sidebar-title">
          <a href="#">Models</a>
        </div>
        <ul class="nav">
          <li><a href="../http-activities"><strong>[Enterprise]</strong> Activities</a></li>
          <li><a href="../http-clients">Clients</a></li>
          <li><a href="../http-dashboards">Dashboards</a></li>
          <li><a href="../http-downloads">Downloads</a></li>
          <li><a href="../http-exports">Exports</a></li>
          <li><a href="../http-journeys"><strong>[Enterprise]</strong> Journeys</a></li>
          <li><a href="../http-journey-progress"><strong>[Enterprise]</strong> Journey Progress</a></li>
          <li><a href="../http-organisations">Organisations</a></li>
          <li><a href="../http-personas">Personas</a></li>
          <li><a href="../http-persona-identifiers">Persona Identifiers</a></li>
          <li><a href="../http-persona-attributes">Persona Attributes</a></li>
          <li><a href="../http-persona-imports">Persona Imports</a></li>
          <li><a href="../http-queries">Queries</a></li>

          <li><a href="../http-roles">Roles</a></li>
          <li><a href="../http-statements">Statements</a></li>
          <li><a href="../http-statement-forwarding">Statement Forwarding</a></li>
          <li><a href="../http-stores">Stores</a></li>
          <li><a href="../http-users">Users</a></li>
          <li><a href="../http-visualisations">Visualisations</a></li>
          <li><a href="../http-xapi">xAPI</a></li>
        </ul>
        <div class="sidebar-title">
          <a href="../faqs">FAQs</a>
        </div>
      </div>
      <div class="col-xs-12 col-sm-9 docs-main">
        <h1 id="indexing">Indexing</h1>
<p>If some of your queries are taking a while to run, you can take advantage of database indexes to improve performance. You can create indexes in your database via <a href="https://docs.mongodb.com/manual/mongo/">the Mongo shell</a>. You can run the code below in your Mongo shell to create our recommended indexes. More information is available about <a href="https://docs.mongodb.com/manual/indexes/">using indexes via Mongo’s documentation</a>. If utilising indexes doesn’t have the required performance improvement, you can instead utilise <a href="../guides-retrieving">BI tools</a>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Statements</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="dl">"</span><span class="s2">statement.id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">stored</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>

<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">statement.object.id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">statement.object.objectType</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">voided</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">statement.verb.id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">statement.object.objectType</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">voided</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">statement.verb.id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">statement.object.id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">voided</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">statement.actor.mbox</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">voided</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">statement.actor.account.name</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">statement.actor.account.homePage</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">voided</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="na">_id</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">voided</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">stored</span><span class="dl">"</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="na">_id</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>

<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">hash</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span><span class="na">unique</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>

<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">activities</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">timestamp</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">agents</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">timestamp</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">registrations</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">timestamp</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">relatedActivities</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">timestamp</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">relatedAgents</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">timestamp</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">verbs</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">timestamp</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>

<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">activities</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">stored</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">agents</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">stored</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">registrations</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">stored</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">relatedActivities</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">stored</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">relatedAgents</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">stored</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">verbs</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">stored</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>

<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">statement.object.id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">statement.verb.id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">statement.object.id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="na">_id</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">stored</span><span class="dl">"</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="na">_id</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">voided</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>

<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">personaIdentifier</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">person._id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">timestamp</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">statements</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="dl">"</span><span class="s2">person._id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>

<span class="c1">// Personas </span>
<span class="nx">db</span><span class="p">.</span><span class="nx">personas</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span><span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">personaIdentifiers</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span><span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">persona</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">personaIdentifiers</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ifi.key</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ifi.value.homePage</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ifi.value.name</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">})</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">personaIdentifiers</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ifi.key</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ifi.value</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">unique</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">personaAttributes</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span><span class="na">organisation</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">personaId</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">key</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">personaAttributes</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span><span class="na">personaId</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">key</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>

<span class="c1">// State API</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">states</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="dl">"</span><span class="s2">organisation</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">lrs</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">activityId</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">agent.account.homePage</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">agent.account.name</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">stateId</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">registration</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">states</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="dl">"</span><span class="s2">organisation</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">lrs</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">activityId</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">agent.mbox</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">stateId</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">states</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="dl">"</span><span class="s2">organisation</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">lrs</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">activityId</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">stateId</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>

<span class="c1">// Others</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span> <span class="dl">"</span><span class="s2">api.basic_key</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">api.basic_secret</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">unique</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">background</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">fullActivities</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">({</span><span class="na">organisation</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="na">lrs_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">activityId</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">unique</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">background</span><span class="p">:</span><span class="kc">true</span><span class="p">});</span>

</code></pre></div></div>

      </div>
    </div>
  </div>

  <footer class="docs-footer">
  <p>Learning Locker and the Squirrel logo are trademark of Learning Pool
    <script>document.write(new Date().getFullYear())</script> | Learning Locker is licensed under GPL 3.0.</p>
  <p>
    <a href="#">Back to top</a>
  </p>
</footer>


</body>

</html>