<!DOCTYPE html>
<html>

<head>
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-941797-10"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments)};
      gtag('js', new Date());

      gtag('config', 'UA-941797-10');
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Learning Locker Documentation</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Documentation for Learning Locker, the open source learning record store.">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/tomorrow-night.css">
    <link rel="stylesheet" href="../css/docs.css">

    <script type="text/javascript">
        function prettyCode() {
            var tables = document.getElementsByTagName('table');
            for (index = 0; index < tables.length; ++index) {
                tables[index].className = "table table-default table-bordered";
            }
        }
    </script>
</head>


<body onload="prettyCode();">

  <div class="docs-masthead">
    <div class="container">
      <a href="../welcome"><img src="../images/logo-small.png" class="logo"></a>
        <nav class="docs-nav pull-right">
            <a class="docs-nav-item" href="http://learninglocker.net">Main Website</a>
            <a class="docs-nav-item" href="https://github.com/LearningLocker/learninglocker">Github</a>
            <a class="docs-nav-item" href="https://github.com/LearningLocker/docs">Edit</a>
        </nav>
    </div>
</div>


  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-3 docs-sidebar">
        <div class="sidebar-title">
          <a href="../welcome">Overview</a>
        </div>
        <ul class="nav">
          <li><a href="../overview-architecture">Architecture</a></li>
          <li><a href="../overview-xapi">xAPI</a></li>
        </ul>
        <div class="sidebar-title">
          <a href="#">Guides</a>
        </div>
        <ul class="nav">
          <li><a href="../guides-installing">Installation</a></li>
          <li><a href="../guides-custom-installation">Custom Installations</a></li>
          <li><a href="../guides-configuring">Configuration</a></li>
          <li><a href="../guides-cli">CLI Operations</a></li>
          <li><a href="../guides-migrating">Migrating from v1</a></li>
          <li><a href="../guides-indexing">Indexing</a></li>
          <li><a href="../guides-monitoring">Monitoring</a></li>
          <li><a href="../guides-structuring">Structuring your LRS</a></li>
          <li><a href="../guides-inserting">Inserting statements</a></li>
          <li><a href="../guides-retrieving">Retrieving statements</a></li>
          <li><a href="../guides-integrating">Integrations</a></li>
        </ul>

        <div class="sidebar-title">
          <a href="#">HTTP Interfaces (APIs)</a>
        </div>
        <ul class="nav">
          <li><a href="../http-rest">REST API</a></li>
          <li><a href="../http-connection">Connection API</a></li>
          <li><a href="../http-aggregation">Aggregation API</a></li>
          <li><a href="../http-aggregate"><strong>[Enterprise]</strong> Aggregate API</a></li>
          <li><a href="../http-statement-deletion">Statement Deletion API</a></li>
        </ul>

        <div class="sidebar-title">
          <a href="#">Models</a>
        </div>
        <ul class="nav">
          <li><a href="../http-activities"><strong>[Enterprise]</strong> Activities</a></li>
          <li><a href="../http-clients">Clients</a></li>
          <li><a href="../http-dashboards">Dashboards</a></li>
          <li><a href="../http-downloads">Downloads</a></li>
          <li><a href="../http-exports">Exports</a></li>
          <li><a href="../http-journeys"><strong>[Enterprise]</strong> Journeys</a></li>
          <li><a href="../http-journey-progress"><strong>[Enterprise]</strong> Journey Progress</a></li>
          <li><a href="../http-organisations">Organisations</a></li>
          <li><a href="../http-personas">Personas</a></li>
          <li><a href="../http-persona-identifiers">Persona Identifiers</a></li>
          <li><a href="../http-persona-attributes">Persona Attributes</a></li>
          <li><a href="../http-persona-imports">Persona Imports</a></li>
          <li><a href="../http-queries">Queries</a></li>

          <li><a href="../http-roles">Roles</a></li>
          <li><a href="../http-statements">Statements</a></li>
          <li><a href="../http-statement-forwarding">Statement Forwarding</a></li>
          <li><a href="../http-stores">Stores</a></li>
          <li><a href="../http-users">Users</a></li>
          <li><a href="../http-visualisations">Visualisations</a></li>
          <li><a href="../http-xapi">xAPI</a></li>
        </ul>
        <div class="sidebar-title">
          <a href="../faqs">FAQs</a>
        </div>
      </div>
      <div class="col-xs-12 col-sm-9 docs-main">
        <h1 id="xapi-agents-http-interface">xAPI Agents HTTP Interface</h1>
<p>The table below describes the routes that the HTTP interface provides, all of the URLs are relative to http://www.example.org/data/xAPI where http://www.example.org is the URL of your Learning Locker instance. To access this interface, you must additionally supply your Basic Auth details with each request in the <code class="language-plaintext highlighter-rouge">Authorization</code> header. Your Basic Auth details can be found under <strong>Settings</strong> &gt; <strong>Clients</strong>. Go to the <a href="../http-xapi">xAPI HTTP interface documentation</a> to see the rest of the xAPI routes.</p>

<table>
  <thead>
    <tr>
      <th>Route</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="../http-xapi-agents#get-agents">GET /agents</a></td>
      <td>Retrieves all of the agents used by a person.</td>
    </tr>
    <tr>
      <td><a href="../http-xapi-agents#put-agentsprofile">PUT /agents/profile</a></td>
      <td>Creates or overwrites a profile document.</td>
    </tr>
    <tr>
      <td><a href="../http-xapi-agents#post-agentsprofile">POST /agents/profile</a></td>
      <td>Creates or merges a profile document.</td>
    </tr>
    <tr>
      <td><a href="../http-xapi-agents#get-agentsprofile">GET /agents/profile</a></td>
      <td>Retrieves a single profile document or multiple profile identifiers.</td>
    </tr>
    <tr>
      <td><a href="../http-xapi-agents#delete-agentsprofile">DELETE /agents/profile</a></td>
      <td>Deletes a single profile document.</td>
    </tr>
  </tbody>
</table>

<iframe src="https://player.vimeo.com/video/168960743" width="80%" height="360" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" style="padding-left: 15%;"></iframe>

<h2 id="get-agents">GET /agents</h2>
<p>This route allows you to retrieve all of the agents that are used by a single person, given one of the agents that they use via the required <code class="language-plaintext highlighter-rouge">agent</code> URL parameter. The request below demonstrates how this is done. A person can be created by inserting statements or using the <a href="../http-personas">Persona HTTP interface</a>. Multiple agents can be associated with a person by using the <a href="../http-personas">Persona HTTP interface</a> too. For more information, view the <a href="https://github.com/adlnet/xAPI-Spec/blob/master/xAPI-Communication.md#24-agents-resource">GET /agents route in the xAPI specification</a>.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">GET http://www.example.org/data/xAPI/agents?agent=%7B%22mbox%22%3A%20%22mailto%3Atest%40example.org%22%7D
Authorization: YOUR_BASIC_AUTH
X-Experience-API-Version: 1.0.3
</span></code></pre></div></div>

<p>The response will always be a 200 for valid requests, similar to the response below.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-Experience-API-Version</span><span class="p">:</span> <span class="s">1.0.3</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json; charset=utf-8</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Person"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"mbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"mailto:test@example.org"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"mbox_sha1sum"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"openid"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="put-agentsprofile">PUT /agents/profile</h2>
<p>This route allows you to create a single profile document if it doesn’t exist or overwrite an existing profile document if it does exist. The route has 2 required URL parameters, an <code class="language-plaintext highlighter-rouge">agent</code> (a JSON encoded object representing the agent that the profile belongs to) and a <code class="language-plaintext highlighter-rouge">profileId</code> (a string representing an identifier for the profile). For more information, view the <a href="https://github.com/adlnet/xAPI-Spec/blob/master/xAPI-Communication.md#agentprofres">PUT /agents/profile route in the xAPI specification</a>.</p>

<h3 id="put-initial-profile">PUT Initial Profile</h3>
<p>To PUT an initial profile, the request should be something like the request below. Notice that there is an <code class="language-plaintext highlighter-rouge">If-None-Match</code> header in the request below, this is to ensure that a profile document doesn’t already exist before the profile document is created. Without the <code class="language-plaintext highlighter-rouge">If-None-Match</code> header there would be a precondition failure thrown and the response would be a 412 for the request below.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">PUT http://www.example.org/data/xAPI/agents/profile?agent=%7B%22mbox%22%3A%20%22mailto%3Atest%40example.org%22%7D&amp;profileId=example_profile_id
Authorization: YOUR_BASIC_AUTH
X-Experience-API-Version: 1.0.3
Content-Type: application/json; charset=utf-8
If-None-Match: "*"

{
  "key_to_remove": "value_to_remove",
  "key_to_change": "value_before_changed"
}
</span></code></pre></div></div>

<p>This route returns a 204 response with no content when the profile document is successfully created, like the example response below. The route will return 412 for a precondition failure if the profile document does already exist and the profile document will not be changed.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">NO CONTENT</span>
<span class="na">X-Experience-API-Version</span><span class="p">:</span> <span class="s">1.0.3</span>
</code></pre></div></div>

<h3 id="get-initial-put-agent-etag">GET Initial PUT Agent ETag</h3>
<p>To retrieve the ETag for the initial profile, you need to retrieve the profile via the <a href="#get-agentsprofile">GET /agents/profile route</a>. The request below demonstrates how to do this.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">GET http://www.example.org/data/xAPI/agents/profile?agent=%7B%22mbox%22%3A%20%22mailto%3Atest%40example.org%22%7D&amp;profileId=example_profile_id
Authorization: YOUR_BASIC_AUTH
X-Experience-API-Version: 1.0.3
</span></code></pre></div></div>

<p>The response to the request above would be something similar to the response below. Notice that it contains the <code class="language-plaintext highlighter-rouge">ETag</code> header.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-Experience-API-Version</span><span class="p">:</span> <span class="s">1.0.3</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json; charset=utf-8</span>
<span class="na">ETag</span><span class="p">:</span> <span class="s">"7C0791125FAB08C7EB75CC8044CFDCEA56F506958DEEE763E6608608EE76C9EE"</span>
<span class="na">Last-Modified</span><span class="p">:</span> <span class="s">2017-08-31T15:16:29.709Z</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"key_to_remove"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_to_remove"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"key_to_change"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_before_changed"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="put-overwrite-profile">PUT Overwrite Profile</h3>
<p>To PUT a profile for overwriting, the request should be something like the request below. Notice that the <a href="#get-initial-put-agent-etag">ETag from the previous request</a> has been used in the <code class="language-plaintext highlighter-rouge">If-Match</code> header below. Without the <code class="language-plaintext highlighter-rouge">If-Match</code> header containing the correct ETag there would be a precondition failure thrown and the response would be a 412 for the request below. The <code class="language-plaintext highlighter-rouge">If-Match</code> header ensures that concurrent updates only change the existing profile document you expected to change.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">PUT http://www.example.org/data/xAPI/agents/profile?agent=%7B%22mbox%22%3A%20%22mailto%3Atest%40example.org%22%7D&amp;profileId=example_profile_id
Authorization: YOUR_BASIC_AUTH
X-Experience-API-Version: 1.0.3
Content-Type: application/json; charset=utf-8
If-Match: "7C0791125FAB08C7EB75CC8044CFDCEA56F506958DEEE763E6608608EE76C9EE"

{
  "key_to_change": "value_after_change",
  "key_to_add": "value_to_add"
}
</span></code></pre></div></div>

<p>The response to the request above would be something similar to the response below.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">NO CONTENT</span>
<span class="na">X-Experience-API-Version</span><span class="p">:</span> <span class="s">1.0.3</span>
</code></pre></div></div>

<h3 id="get-overwritten-profile">GET Overwritten Profile</h3>
<p>To GET the overwritten profile, the request should be something like the request below.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">GET http://www.example.org/data/xAPI/agents/profile?agent=%7B%22mbox%22%3A%20%22mailto%3Atest%40example.org%22%7D&amp;profileId=example_profile_id
Authorization: YOUR_BASIC_AUTH
X-Experience-API-Version: 1.0.3
</span></code></pre></div></div>

<p>The response to the request above would be something similar to the response below.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-Experience-API-Version</span><span class="p">:</span> <span class="s">1.0.3</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json; charset=utf-8</span>
<span class="na">ETag</span><span class="p">:</span> <span class="s">"BBB79685FA17A8450E7307710C8A79FD9C1059A0106E9F9811AF6FD18D0F0EED"</span>
<span class="na">Last-Modified</span><span class="p">:</span> <span class="s">2017-08-31T15:17:29.709Z</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"key_to_change"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_after_change"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"key_to_add"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_to_add"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="post-agentsprofile">POST /agents/profile</h2>
<p>This route allows you to create a single profile document if it doesn’t exist or merge an existing profile document if it does exist. The route allows the same URL parameters as the <a href="#put-agentsprofile">PUT /agents/profile route</a>. The profile document is merged when the profile document exists, the existing profile document is a JSON encoded object, and the posted profile document is a JSON encoded object. When the two JSON encoded documents are merged, only the top-level properties are merged. The example requests below demonstrate merging profile documents. For more information, view the <a href="https://github.com/adlnet/xAPI-Spec/blob/master/xAPI-Communication.md#agentprofres">POST /agents/profile route in the xAPI specification</a>.</p>

<h3 id="post-initial-profile">POST Initial Profile</h3>
<p>To POST an initial profile, the request should be something like the request below. Notice that there is an <code class="language-plaintext highlighter-rouge">If-None-Match</code> header in the request below, this is to ensure that a profile document doesn’t already exist before the profile document is created. Without the <code class="language-plaintext highlighter-rouge">If-None-Match</code> header there would be a precondition failure thrown and the response would be a 412 for the request below.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">POST http://www.example.org/data/xAPI/agents/profile?agent=%7B%22mbox%22%3A%20%22mailto%3Atest%40example.org%22%7D&amp;profileId=example_profile_id
Authorization: YOUR_BASIC_AUTH
X-Experience-API-Version: 1.0.3
Content-Type: application/json; charset=utf-8
If-None-Match: "*"

{
  "key_to_keep": "value_to_keep",
  "key_to_change": "value_before_change"
}
</span></code></pre></div></div>

<p>The response to the request above would be something similar to the response below.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">NO CONTENT</span>
<span class="na">X-Experience-API-Version</span><span class="p">:</span> <span class="s">1.0.3</span>
</code></pre></div></div>

<h3 id="get-initial-post-agent-etag">GET Initial POST Agent ETag</h3>
<p>To retrieve the ETag for the initial profile, you need to retrieve the profile via the <a href="#get-agentsprofile">GET /agents/profile route</a>. The request below demonstrates how to do this.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">GET http://www.example.org/data/xAPI/agents/profile?agent=%7B%22mbox%22%3A%20%22mailto%3Atest%40example.org%22%7D&amp;profileId=example_profile_id
Authorization: YOUR_BASIC_AUTH
X-Experience-API-Version: 1.0.3
</span></code></pre></div></div>

<p>The response to the request above would be something similar to the response below. Notice that it contains the <code class="language-plaintext highlighter-rouge">ETag</code> header.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-Experience-API-Version</span><span class="p">:</span> <span class="s">1.0.3</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json; charset=utf-8</span>
<span class="na">ETag</span><span class="p">:</span> <span class="s">"7C0791125FAB08C7EB75CC8044CFDCEA56F506958DEEE763E6608608EE76C9EE"</span>
<span class="na">Last-Modified</span><span class="p">:</span> <span class="s">2017-08-31T15:16:29.709Z</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"key_to_keep"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_to_keep"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"key_to_change"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_before_change"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="post-merge-profile">POST Merge Profile</h3>
<p>To POST a profile for merging, the request should be something like the request below. Notice that the <a href="#get-initial-post-agent-etag">ETag from the previous request</a> has been used in the <code class="language-plaintext highlighter-rouge">If-Match</code> header below. Without the <code class="language-plaintext highlighter-rouge">If-Match</code> header containing the correct ETag there would be a precondition failure thrown and the response would be a 412 for the request below. The <code class="language-plaintext highlighter-rouge">If-Match</code> header ensures that concurrent updates only change the existing profile document you expected to change.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">POST http://www.example.org/data/xAPI/agents/profile?agent=%7B%22mbox%22%3A%20%22mailto%3Atest%40example.org%22%7D&amp;profileId=example_profile_id
Authorization: YOUR_BASIC_AUTH
X-Experience-API-Version: 1.0.3
Content-Type: application/json; charset=utf-8
If-Match: "7C0791125FAB08C7EB75CC8044CFDCEA56F506958DEEE763E6608608EE76C9EE"

{
  "key_to_change": "value_after_change",
  "key_to_add": "value_to_add"
}
</span></code></pre></div></div>

<p>The response to the request above would be something similar to the response below.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">NO CONTENT</span>
<span class="na">X-Experience-API-Version</span><span class="p">:</span> <span class="s">1.0.3</span>
</code></pre></div></div>

<h3 id="get-merged-profile">GET Merged Profile</h3>
<p>To GET the merged profile, the request should be something like the request below.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">GET http://www.example.org/data/xAPI/agents/profile?agent=%7B%22mbox%22%3A%20%22mailto%3Atest%40example.org%22%7D&amp;profileId=example_profile_id
Authorization: YOUR_BASIC_AUTH
X-Experience-API-Version: 1.0.3
</span></code></pre></div></div>

<p>The response to the request above would be something similar to the response below.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-Experience-API-Version</span><span class="p">:</span> <span class="s">1.0.3</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json; charset=utf-8</span>
<span class="na">ETag</span><span class="p">:</span> <span class="s">"BBB79685FA17A8450E7307710C8A79FD9C1059A0106E9F9811AF6FD18D0F0EED"</span>
<span class="na">Last-Modified</span><span class="p">:</span> <span class="s">2017-08-31T15:17:29.709Z</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"key_to_keep"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_to_keep"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"key_to_change"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_after_change"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"key_to_add"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_to_add"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="get-agentsprofile">GET /agents/profile</h2>
<p>This route allows you to retrieve a single profile document or multiple profile identifiers. If the <code class="language-plaintext highlighter-rouge">profileId</code> URL parameter is set, it will <a href="#retrieve-single-agent-document">retrieve a single profile document</a> with the profile identifier, otherwise it will <a href="#retrieve-many-agent-identifiers">retrieve many profile identifiers</a>. For more information, view the <a href="https://github.com/adlnet/xAPI-Spec/blob/master/xAPI-Communication.md#agentprofres">GET /agents/profile route in the xAPI specification</a>.</p>

<h3 id="retrieve-single-agent-document">Retrieve Single Agent Document</h3>
<p>The route allows the same URL parameters as the <a href="#put-agentsprofile">PUT /agents/profile route</a>. A request to this route should be similar to the request below.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">GET http://www.example.org/data/xAPI/agents/profile?agent=%7B%22mbox%22%3A%20%22mailto%3Atest%40example.org%22%7D&amp;profileId=example_profile_id
Authorization: YOUR_BASIC_AUTH
X-Experience-API-Version: 1.0.3
</span></code></pre></div></div>

<p>The response to the request above would be something similar to the response below. If the profile document cannot be found, a 404 response will be returned instead of a 200.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-Experience-API-Version</span><span class="p">:</span> <span class="s">1.0.3</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json; charset=utf-8</span>
<span class="na">ETag</span><span class="p">:</span> <span class="s">"7C0791125FAB08C7EB75CC8044CFDCEA56F506958DEEE763E6608608EE76C9EE"</span>
<span class="na">Last-Modified</span><span class="p">:</span> <span class="s">2017-08-31T15:16:29.709Z</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"example_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example_value"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="retrieve-many-agent-identifiers">Retrieve Many Agent Identifiers</h3>
<p>The route allows the same URL parameters as the <a href="#put-agentsprofile">PUT /agents/profile route</a> except for the <code class="language-plaintext highlighter-rouge">profileId</code> parameter and with the addition of the optional <code class="language-plaintext highlighter-rouge">since</code> parameter. The <code class="language-plaintext highlighter-rouge">since</code> URL parameter is an ISO timestamp that ensures only profile identifiers stored since the timestamp (exclusive) are returned. A request to this route should be similar to the request below.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">GET http://www.example.org/data/xAPI/agents/profile?agent=%7B%22mbox%22%3A%20%22mailto%3Atest%40example.org%22%7D&amp;since=2017-09-04T12:45:31+00:00
Authorization: YOUR_BASIC_AUTH
X-Experience-API-Version: 1.0.3
</span></code></pre></div></div>

<p>The response to the request above would be something similar to the response below, where the JSON encoded response body contains an array of profile identifiers that match the URL parameters.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-Experience-API-Version</span><span class="p">:</span> <span class="s">1.0.3</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json; charset=utf-8</span>

<span class="p">[</span><span class="s2">"example_profile_id"</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<h2 id="delete-agentsprofile">DELETE /agents/profile</h2>
<p>This route allows you to delete a single profile document and allows the same URL parameters as the <a href="#put-agentsprofile">PUT /agents/profile route</a>. For more information, view the <a href="https://github.com/adlnet/xAPI-Spec/blob/master/xAPI-Communication.md#agentprofres">DELETE /agents/profile route in the xAPI specification</a>.</p>

<h3 id="get-agent-profile-etag">GET Agent Profile ETag</h3>
<p>To retrieve the ETag for the agent profile, you need to retrieve the profile via the <a href="#get-agentsprofile">GET /agents/profile route</a>. The request below demonstrates how to do this.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">GET http://www.example.org/data/xAPI/agents/profile?agent=%7B%22mbox%22%3A%20%22mailto%3Atest%40example.org%22%7D&amp;profileId=example_profile_id
Authorization: YOUR_BASIC_AUTH
X-Experience-API-Version: 1.0.3
</span></code></pre></div></div>

<p>The response to the request above would be something similar to the response below.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-Experience-API-Version</span><span class="p">:</span> <span class="s">1.0.3</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json; charset=utf-8</span>
<span class="na">ETag</span><span class="p">:</span> <span class="s">"BBB79685FA17A8450E7307710C8A79FD9C1059A0106E9F9811AF6FD18D0F0EED"</span>
<span class="na">Last-Modified</span><span class="p">:</span> <span class="s">2017-08-31T15:17:29.709Z</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"example_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example_value"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="delete-agent-profile">Delete Agent Profile</h3>
<p>Notice that the <a href="#get-agent-profile-etag">ETag from the previous request</a> has been used in the <code class="language-plaintext highlighter-rouge">If-Match</code> header below. Without the <code class="language-plaintext highlighter-rouge">If-Match</code> header containing the correct ETag there would be a precondition failure thrown and the response would be a 412 for the request below. The <code class="language-plaintext highlighter-rouge">If-Match</code> header ensures that concurrent deletes only delete the existing profile document you expected to delete.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">DELETE http://www.example.org/data/xAPI/agents/profile?agent=%7B%22mbox%22%3A%20%22mailto%3Atest%40example.org%22%7D&amp;profileId=example_profile_id
Authorization: YOUR_BASIC_AUTH
X-Experience-API-Version: 1.0.3
If-Match: "BBB79685FA17A8450E7307710C8A79FD9C1059A0106E9F9811AF6FD18D0F0EED"
</span></code></pre></div></div>

<p>The response to the request above would be something similar to the response below. If the profile document cannot be found, a 404 response will be returned instead of a 204.</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">NO CONTENT</span>
<span class="na">X-Experience-API-Version</span><span class="p">:</span> <span class="s">1.0.3</span>
</code></pre></div></div>

      </div>
    </div>
  </div>

  <footer class="docs-footer">
  <p>Learning Locker and the Squirrel logo are trademark of Learning Pool
    <script>document.write(new Date().getFullYear())</script> | Learning Locker is licensed under GPL 3.0.</p>
  <p>
    <a href="#">Back to top</a>
  </p>
</footer>


</body>

</html>